# Perception Package

## Overview
The `perception_pkg` constitutes the drone's visual system. It transforms raw sensor data into a 3D representation (Octomap) and identifies objects of interest, such as lanterns, using computer vision.

## Key Functionalities
* **Octomap Generation**: Converts RealSense depth images into PointCloud2 and subsequently into a binary occupancy map with 0.6m resolution.
* **Lantern Recognition**: Utilizes a Semantic Camera to isolate yellow colors and calculates the 3D position of the object by cross-referencing depth data.
* **Coordinate Transformation (TF2)**: Converts detections from the local `camera` frame to the global `world` frame, allowing the State Machine to know the exact location of the lantern.
* **CPU Optimization**: The Octomap server is configured to ignore data beyond 40 meters to reduce computational load during flight.

## Topic Interfaces

### Subscribed Topics
| Topic | Message Type | Description |
| :--- | :--- | :--- |
| `/realsense/depth/image` | `sensor_msgs/msg/Image` | Raw depth data for mapping and object localization. |
| `/Quadrotor/Sensors/SemanticCamera/image_raw` | `sensor_msgs/msg/Image` | Semantic image used for lantern color masking. |

### Published Topics
| Topic | Message Type | Description |
| :--- | :--- | :--- |
| `/octomap_binary` | `octomap_msgs/msg/Octomap` | 3D map sent to the Explorer for path planning. |
| `/realsense/depth/points` | `sensor_msgs/msg/PointCloud2` | Intermediate point cloud generated by the `depth_image_proc` node. |

## Launch
To start the mapping system:
```bash
ros2 launch perception_pkg mapping.launch.py
# Path Planning Package (`path_planning_pkg`)

## Overview
The `path_planning_pkg` is the primary navigation component for the Sub-Terrain Challenge drone. It acts as the bridge between perception (the 3D map) and the controller. 

This node receives the drone's current position and a voxel-grid map of the environment. It utilizes a custom 3D **A* (A-Star) graph-search algorithm** to find a collision-free path to a target destination. Once a safe path of discrete waypoints is found, it feeds these points into the `mav_trajectory_generation` library to compute a dynamically feasible, smooth polynomial trajectory. This trajectory is then published directly to the drone's controller.

### Core Features:
- **3D A* Search:** Explores the 26-connected neighbor space in a 3D grid.
- **Volumetric Collision Checking:** Does not just check the center point; it checks a 0.4m radius spherical bounding box around the drone to ensure the physical quadrotor body does not hit walls.
- **Unknown Space Handling:** Treats unknown/unmapped space as obstacles to guarantee the drone only flies into visually verified safe zones.
- **Trajectory Smoothing:** Subsamples the raw A* path and optimizes it using Minimum-Snap polynomial optimization.

---

## Node: `path_planner_node`

### Subscribed Topics
| Topic | Type | Description |
|---|---|---|
| `/current_state_est` | `nav_msgs/msg/Odometry` | The current pose (position and orientation) and twist (linear/angular velocity) of the drone. Used as the starting point for the A* search and to set the initial velocity constraint for the trajectory. |
| `/octomap_binary` | `octomap_msgs/msg/Octomap` | The boolean representation of the 3D map generated by the perception pipeline. Used for collision checking during the A* expansion phase. |

### Published Topics
| Topic | Type | Description |
|---|---|---|
| `/command/trajectory` | `mav_planning_msgs/msg/PolynomialTrajectory4D` | The final, smooth polynomial curve generated from the A* waypoints. The `controller_pkg` listens to this to actuate the rotors. |
| `/raw_astar_path` | `nav_msgs/msg/Path` | (Debug/Visualization) The discrete, jagged sequence of 3D coordinates output directly by the A* algorithm before smoothing. Can be viewed in RViz. |

---

## Dependencies
This package relies on both standard ROS2 libraries and custom university-provided libraries:
- `rclcpp`
- `nav_msgs`, `geometry_msgs`
- `tf2_ros`
- `octomap`, `octomap_msgs`
- `mav_trajectory_generation` (University custom package)
- `mav_planning_msgs` (University custom package)
- `Eigen3`

## Usage / Testing

To run this node individually for testing (assuming simulation and octomap servers are already running):

```bash
source install/setup.bash
ros2 run path_planning_pkg path_planner_node
